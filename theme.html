<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>样式传递</title>
   
</head>
<body>
    <style id="style">
        :root{
            --bg-color:#fff
        }
    </style>
    <my-card></my-card>
    <input type="text"> 
    <button>点击</button>
</body>




<script>
    class MyCard extends HTMLElement{
        constructor(){
            super()
            this.attachShadow({mode:'open'})

            this.shadowRoot.innerHTML =`
                <div style='width:100px;height:100px;border:1px solid #000;background-color:var(--bg-color)'></div>
            
            `

        }

    }
    customElements.define('my-card', MyCard)

    document.querySelector('button').addEventListener('click',()=>{
        let bgColor = document.querySelector('input').value
        document.body.removeChild(document.querySelector('#style'))
        let style = document.createElement('style')
        style.setAttribute('id','style')
        style.innerHTML =`
        :root{
            --bg-color:${bgColor}
        }
        `
        document.body.appendChild(style)
        console.log(bgColor)
    },false)
</script>
</html>